<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
@include("common/global.html"){}
@include("common/header.html"){}
<title>${movie.pureName }（蝉影）</title>
<link rel="stylesheet" type="text/css" href="${pageCtx('ctxassets')}/css/detail.css" />
<script src="${pageCtx('ctxassets')}/js/easySlider.js"></script>
</head>
<body>
	@include("common/nav.html"){}
	<div id="wrapper">
		<div id="pagecontent">
			<div id="titleBar">
				<div class="attention"></div>
				<div class="title_wrapper">
					<div id="title">
						<h1>
							${movie.pureName }
							@if(isNotEmpty(movie.anotherNameArr)){
								/ ${movie.anotherNameArr[0] }
							@}
						</h1>
						<span id="year">(${movie.year })</span>
					</div>
					<div id="subtext">
						
					</div>
				</div>
			</div>
			<div id="main">
				<div id="main-top">
					<div class="vital">
						<div id="poster">
							<div id="icon">
								<img alt="" src="${pageCtx('ctxassets')}/images/movie_default_large.png" data-original="${movie.iconUrl!}">
							</div>
							<div id="slider" style="visibility: hidden;">
								@if(isNotEmpty(movie.posterUrlList)){
									<ul class="slides clearfix">
										@for(item in movie.posterUrlList){
											<li><img class="responsive" src="${item }" ></li>
										@}
									</ul>
									<ul class="controls">
										<li><img src="${pageCtx('ctxassets')}/images/detail/prev.png" alt="previous"></li>
										<li><img src="${pageCtx('ctxassets')}/images/detail/next.png" alt="next"></li>
									</ul>
									<ul class="pagination">
										@for(item in movie.posterUrlList){
											<li class="${itemLP.index == 1 ? 'active' : '' }"></li>
										@}
									</ul>
								@}else {
									<img alt="" src="${pageCtx('ctxassets')}/images/movie_default_cross.png">
								@}
							</div>
						</div>
					</div>
					<div id="summary_wrapper">
						<div class="plot_summary">
							<div class="summary_text">
								　　${isNotEmpty(movie.summary) ? movie.summary : '......' }
							</div>
							@if(isNotEmpty(movie.directors)){
								<div class="credit_summary_item">
									<h4 class="inline">导演：</h4>
									<span>${movie.directors }</span>
								</div>
							@}
							
							@if(isNotEmpty(movie.writers)){
								<div class="credit_summary_item">
									<h4 class="inline">编剧：</h4>
									<span>${movie.writers }</span>
								</div>
							@}
							
							@if(isNotEmpty(movie.casts)){
								<div class="credit_summary_item">
									<h4 class="inline">演员：</h4>
									<span>${movie.casts }</span>
								</div>
							@}
							
							@if(isNotEmpty(movie.labels)){
								<div class="credit_summary_item">
									<h4 class="inline">标签：</h4>
									<span>${movie.labels }</span>
								</div>
							@}
							
							@if(isNotEmpty(movie.locations)){
								<div class="credit_summary_item">
									<h4 class="inline">制片国家/地区：</h4>
									<span>${movie.locations }</span>
								</div>
							@}
							
							@if(isNotEmpty(movie.languages)){
								<div class="credit_summary_item">
									<h4 class="inline">语言：</h4>
									<span>${movie.languages }</span>
								</div>
							@}
							
							@if(isNotEmpty(movie.releaseTimeStr)){
								<div class="credit_summary_item">
									<h4 class="inline">
										@if(movie.category == 2){
											首播：
										@}else {
											上映日期：
										@}
									</h4>
									<span>${movie.releaseTimeStr }</span>
								</div>
							@}
							
							@if(isNotEmpty(movie.presentSeason)){
								<div class="credit_summary_item">
									<h4 class="inline">季数：</h4>
									<span>${movie.presentSeason }</span>
								</div>
							@}
							
							@if(isNotEmpty(movie.totalEpisode)){
								<div class="credit_summary_item">
									<h4 class="inline">集数：</h4>
									<span>${movie.totalEpisode }</span>
								</div>
							@}
							
							@if(isNotEmpty(movie.duration)){
								<div class="credit_summary_item">
									<h4 class="inline">片长：</h4>
									<span>${movie.duration }</span>
								</div>
							@}
							
							@if(isNotEmpty(movie.anotherName)){
								<div class="credit_summary_item">
									<h4 class="inline">又名：</h4>
									<span>${movie.anotherName }</span>
								</div>
							@}
						</div>
						<div class="star clearfix">
	                        <span class="allstar${movie.doubanScoreCalc }"></span>
	                        <span class="score">${movie.doubanScore }</span>
	                        <span class="pl">
	                        	@if(isNotEmpty(movie.attentionRate)){
	                        		(${movie.attentionRate } 人评价)
	                        	@}else {
	                        		(${movie.attentionRate } 暂无
	                        	@}
	                        </span>
                        </div>
					</div>
					
					<div id="links">
						<table>
							<tr class="theme">
								<td class="title">名字</td>
								<td class="center">字幕</td>
								<td class="center">制式</td>
								<td class="center">大小</td>
								<td class="center">下载</td>
								<td class="center updateTime">更新时间</td>
							</tr>
							@for(item in resources){
								<tr class="${itemLP.index % 2 == 0 ? 'backgray':'' }">
									@var pureName = item.pureName;
									@if(isNotEmpty(item.format)){
										@pureName = pureName + "." + item.format;
									@}
									@if(movie.category == 2){
										@var episodeStr = item.episodeEnd;
										@if(isNotEmpty(item.episodeStart)){
											@episodeStr = item.episodeStart + "-" + episodeStr;
										@}
										@pureName = pureName + "   第" + episodeStr + "集";
									@}
									<td><a class="download" href="${item.downloadLinkUrl!}">${pureName }</a></td>
									<td class="center subtitle">${item.subtitle!"--"}</td>
									<td class="center">
										<span class="definition${item.definition!}">
											@if(isNotEmpty(item.quality) && isNotEmpty(item.resolution)){
												${item.quality }&nbsp;${item.resolution }
											@}else if(isNotEmpty(item.quality)){
												${item.quality }
											@}else if(isNotEmpty(item.resolution)){
												${item.resolution }
											@}else {
												--
											@}
										</span>
									</td>
									<td class="center">${item.size!"--"}</td>
									<td class="center">
										<a class="download" href="${item.downloadLinkUrl!}">
											<img alt="" src="${pageCtx('ctxassets')}/images/detail/other.png" data-original="${pageCtx('ctxassets')}/images/detail/${item.linkType!}.png">
										</a>
									</td>
									<td class="center updateTime">${item.updateTimeStr!item.createTimeStr}</td>
								</tr>
							@}
						</table>
					</div>
				</div>
			</div>
			<div id="sidebar" style="width:325px; margin-right:0px;">
				@include("common/sidebar.html"){}
				<div id="SOHUCS" sid="${movie.prn }"></div>
				<script charset="utf-8" type="text/javascript" src="http://changyan.sohu.com/upload/changyan.js" ></script>
				<script type="text/javascript">
					window.changyan.api.config({
					appid: 'cytakvx4W',
					conf: 'prod_a0bd794c38e6ae1d3d93faddf1b4bde5'
					});
				</script>
			</div>
			<br class="clear">
			@include("common/footer.html"){}
		</div>
	</div>
</body>
<script type="text/javascript">
$(function() {
	$("#slider").easySlider( {
		slideSpeed: 500,
		paginationSpacing: "15px",
		paginationDiameter: "12px",
		paginationPositionFromBottom: "20px",
		slidesClass: ".slides",
		controlsClass: ".controls",
		paginationClass: ".pagination"
	});

	var isrun = false;
	$(".linkinput").bind({
        copy : function(){
        	if(isrun){
        		return;
        	}
        	isrun = true;
        	addHot();
        },
        focus : function(){
        	$(this).select();
        }
    });
	
	$(".download").click(function(){
		if(isrun){
    		return;
    	}
		isrun = true;
    	addHot();
	});
	
	function addHot(){
		$.ajax({
    		url:ctx+"/hotDownload",
    		data:{"mi":"${movie.prn}"},
    		success : function(data){
    			isrun = false;
    		},
    		error : function(data){
    			isrun = false;
    		}
    	});
	}
});
</script>
</html>